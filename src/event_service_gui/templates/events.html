{% extends "adm_base.html" %}
{% block titlecontainer %}
  <div class="w3-10"></div>
  <div class="w3-80">
{% endblock %}

{% block titleheader %}{{ lopsinfo }}{% endblock %}
{% block refresh %}{% endblock %}
{% block titlemain %}{{ lopsinfo }}{% endblock %}
{% block content %}
  <div id=spacer></div>
  {% if create_new %}
    <form action=/events method=post enctype="multipart/form-data" >
      <table cellpadding=4>
        <tr id=spacer></tr>
        <tr>
          <td colspan=2 id=headerblue>
            <b>Importer eventinformasjon fra fil</b>
          </td>
        </tr>
        <tr>
          <td>
            <input type="file" name="file" onchange="savefile(this)">
          </td>
          <td>
            <input type="submit" name=create_file value="  Last opp  ">
          </td>
        </tr>
        <tr>
          <td colspan=2>
            <br>Informasjon
          </td>
        </tr>
        <tr>
          <td colspan=2>
            Filformat som aksepteres:<br>
            1. XML: SSF XML - eksportert fra Sportsadmin. <br>
            Start med å eksportere deltakerliste fra Sportsadmin. Brukerveiledning for eksportering finnes i <a href="https://itinfo.nif.no/SportsAdmin_Arrangement#Eksportere_til_Excel_og_XML" target=_blank>Sportsadmin</a>.
          </td>
        </tr>
        <tr id=spacer></tr>
      </table>
    </form>

    <form action=/events method=post>
      <table cellpadding=4>
        <tr id=spacer></tr>
        <tr>
          <td colspan=3 id=headerblue>
            <b>Opprett nytt arrangement</b>
          </td>
        </tr>
        <tr>
          <td width=150>Navn</td>
          <td><input type=text name="name" value="" required></td>
          <td></td>
        </tr>
        <tr>
          <td>Dato</td>
          <td><input type=text name=date_of_event value="" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" required></td>
          <td>Event dato, eksempel: 2021-10-26</td>
        </tr>
        <tr>
          <td>Tid</td>
          <td><input type=text name=time_of_event value="" pattern="[0-9]{2}:[0-9]{2}:[0-9]{2}" required></td>
          <td>Klokkeslett for første start, ex: 14:00:00</td>
        </tr>
        <tr>
          <td>Format</td>
          <td>
            <select name="competition_format" required>
              {% for format in competition_formats %}
                <option value="{{ format.name }}">{{ format.name }}</option>
              {% endfor %}
            </select>
          </td>
          <td>Type arrangement</td>
        </tr>
        <tr>
          <td>Arrangør</td>
          <td><input type=text name=organiser value=""></td>
          <td>Klubb(er) ansvarlige for arramgement</td>
        </tr>
        <tr>
          <td>Nettsted</td>
          <td><input type=text name=webpage value=""></td>
          <td>URL til hjemmeside / mer informasjon om arrangmeentet</td>
        </tr>
        <tr>
          <td>Informasjon</td>
          <td><input type=text name=information value=""></td>
          <td>Kort tekst med nøkkelinformasjon</td>
        </tr>
        <tr>
            <td></td>
            <td>
              <input type="submit" name=create_manual value="  Opprett  ">
            </td>
            <td></td>
        </tr>
        <tr id=spacer></tr>
      </table>
    </form>
  {% else %}
    <div align=right>
            <form action=/events method=post>
              <input type="hidden" name="event_id" value="{{ event.id }}">
              <input type="submit" name=delete value="  Slett  ">
            </form>
    </div>
    <div id=spacer></div>
    <form action=/events method=post>
      <input type="hidden" name="event_id" value="{{ event.id }}">
      <table cellpadding=4>
        <tr>
          <td colspan=3 id=headerblue>
            Rediger arrangementsinformasjon
          </td>
        </tr>
        <tr>
          <td valign=top>
            <table cellpadding=4>
              <tr>
                <td width=150>Navn</td>
                <td><input type=text name=name value="{{ event.name }}"></td>
              </tr>
              <tr>
                <td>Dato</td>
                <td><input type=text name=date_of_event value="{{ event.date_of_event }}"></td>
              </tr>
              <tr>
                <td>Tid</td>
                <td><input type=text name=time_of_event value="{{ event.time_of_event }}"></td>
              </tr>
              <tr>
                <td>Format</td>
                <td><input type=text name=competition_format value="{{ event.competition_format }}"></td>
              </tr>
              <tr>
                <td>Arrangør</td>
                <td><input type=text name=organiser value="{{ event.organiser }}"></td>
              </tr>
              <tr>
                <td>Nettsted</td>
                <td><input type=text name=webpage value="{{ event.webpage }}"></td>
              </tr>
              <tr>
                <td>Informasjon</td>
                <td><input type=text name=information value="{{ event.information }}"></td>
              </tr>
            </table>
          </td>
          <td width=150>
          </td>
          <td valign=top>
              <table cellpadding=4>
                {% if event.competition_format == "Interval Start" %}
                  <tr>
                    <td width=150>Startintervall</td>
                    <td><input type=text name=intervals value="{{ event.intervals }}"></td>
                    <td>Tid i sekunder.</td>
                  </tr>
                {% elif event.competition_format == "Individual Sprint" %}
                  <tr>
                    <td width=150>Tid mellom heat</td>
                    <td><input type=text name= value="{{ event.time_between_rounds }}"></td>
                    <td>Tid i sekunder.</td>
                  </tr>
                  <tr>
                    <td>Tid mellom runder</td>
                    <td><input type=text name= value="{{ event.time_between_heats }}"></td>
                    <td>Sekunder. Standard tid mellom siste start i en runde og første i påfølgende.</td>
                  </tr>
                {% endif %}
              </table>
          </td>
        <tr>
        <tr>
            <td></td>
            <td></td>
            <td>
              <input type="submit" name=update value="  Oppdater  ">
            </td>
        </tr>
        <tr id=spacer></tr>
      </table>
    </form>
    {% endif %}
{% endblock %}
