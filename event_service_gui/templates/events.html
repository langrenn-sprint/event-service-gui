{% extends "open_base_new.html" %}

{% block titleheader %}{{ lopsinfo }}{% endblock %}
{% block titlemain %} <img id=menu_icon src="../static/icon_event.png"> {{ lopsinfo }}{% endblock %}
{% block headercontainer %}{{ lopsinfo }} <img id=header_icon src="../static/icon_event.png"> {% endblock %}
{% block refresh %}{% endblock %}
{% block max_width %}1200{% endblock %}

{% block tips %}
  {% if create_new %}
    <iframe width="560" height="315" src="https://www.youtube.com/embed/By1KbuHGirQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
  {% endif %}
{% endblock %}

{% block content %}
  <div id=spacer></div>
  <div class="w3-container">
  {% if create_new %}
    <form action=/events method=post>
      <table>
        <tr id=spacer></tr>
        <tr>
          <td colspan=3 id=headerblue>
            <b>Opprett nytt arrangement</b>
          </td>
        </tr>
        <tr>
          <td width=150>Navn *</td>
          <td><input type=text class="form-control" name="name" value="" required></td>
          <td></td>
        </tr>
        <tr>
          <td>Dato *</td>
          <td><input type=text class="form-control" name=date_of_event value="" placeholder="2021-01-01" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" required></td>
          <td></td>
        </tr>
        <tr>
          <td>Tid *</td>
          <td><input type=text class="form-control" name=time_of_event value="" placeholder="09:00:30" pattern="[0-9]{2}:[0-9]{2}:[0-9]{2}" required></td>
          <td>Klokkeslett første start</td>
        </tr>
        <tr>
          <td>Tidssone</td>
          <td><input type=text class="form-control" name=timezone value="Europe/Oslo"></td>
          <td>Tidssone på arrangements-lokasjonen</td>
        </tr>
        <tr>
          <td>Rennformat</td>
          <td>
            <select name="competition_format" class="form-control" required>
              {% for c_format in competition_formats %}
                <option value="{{ c_format.name }}">{{ c_format.name }}</option>
              {% endfor %}
            </select>
          </td>
          <td>Type arrangement</td>
        </tr>
        <tr>
          <td>Arrangør</td>
          <td><input type=text class="form-control" name=organiser value=""></td>
          <td>Klubb(er) ansvarlige for arramgement</td>
        </tr>
        <tr>
          <td>Nettsted</td>
          <td><input type=text class="form-control" name=webpage value=""></td>
          <td>URL til hjemmeside / mer informasjon om arrangmeentet</td>
        </tr>
        <tr>
          <td>Informasjon</td>
          <td><input type=text class="form-control" name=information value=""></td>
          <td>Kort tekst med nøkkelinformasjon</td>
        </tr>
        <tr>
            <td></td>
            <td>
              <input type="submit" name=create_manual value="  Opprett  " class="btn btn-scuccess">
            </td>
            <td></td>
        </tr>
        <tr id=spacer></tr>
      </table>
    </form>
  {% else %}
    <table>
      <tr>
        <td>
          <form action=/tasks method=get>
            <input type="hidden" name=event_id value="{{ event_id }}">
            <input type="submit" name="to_tasks" value="  Tilbake til oversikten (sette rennet)  " class="btn btn-default">
          </form>
        </td>
        <td align="right">
          <form action=/events method=post>
            <input type="hidden" name="event_id" value="{{ event.id }}">
            <input type="submit" name=delete value="  Slett  " class="btn btn-warning">
          </form>
        </td>
      </tr>
    </table>
    <div id=spacer></div>
    <form action=/events method=post>
      <input type="hidden" name="event_id" value="{{ event.id }}">
      <table>
        <tr>
          <td colspan=3 id=headerblue>
            Rediger arrangementsinformasjon
          </td>
        </tr>
        <tr>
          <td width=150>Navn</td>
          <td><input type=text class="form-control" name=name value="{{ event.name }}"></td>
          <td></td>
        </tr>
        <tr>
          <td>Dato</td>
          <td><input type=text class="form-control" name=date_of_event value="{{ event.date_of_event }}"></td>
          <td></td>
        </tr>
        <tr>
          <td>Tid</td>
          <td><input type=text class="form-control" name=time_of_event value="{{ event.time_of_event }}"></td>
          <td></td>
        </tr>
        <tr>
          <td>Tidssone</td>
          <td><input type=text class="form-control" name=timezone value="{{ event.timezone }}"></td>
          <td>Lokal tid er: {{ local_time_now }}</td>
        </tr>
        <tr>
          <td>Format</td>
          <td><input type=text class="form-control" name=competition_format value="{{ event.competition_format }}"></td>
          <td></td>
        </tr>
        <tr>
          <td>Arrangør</td>
          <td><input type=text class="form-control" name=organiser value="{{ event.organiser }}"></td>
          <td></td>
        </tr>
        <tr>
          <td>Nettsted</td>
          <td><input type=url name=webpage value="{{ event.webpage }}"></td>
          <td></td>
        </tr>
        <tr>
          <td>Informasjon</td>
          <td><input type=text class="form-control" name=information value="{{ event.information }}" size="40"></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td>
            <input type="submit" name=update value="  Lagre  " class="btn btn-default">
          </td>
          <td>
            {% if event.competition_format == "Interval Start" %}
              <input type=hidden name=intervals value="{{ event.intervals }}">
            {% elif event.competition_format == "Individual Sprint" %}
              <input type=hidden name=time_between_rounds value="{{ event.time_between_rounds }}">
              <input type=hidden name=time_between_heats value="{{ event.time_between_heats }}">
              <input type=hidden name=max_no_of_contestants_in_race value="{{ event.max_no_of_contestants_in_race }}">
            {% endif %}
          </td>
        </tr>
      </table>
    </form>
    {% endif %}
  </div>
{% endblock %}
